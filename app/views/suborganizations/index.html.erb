<% content_for :page_title, @presenter.page_title %>
<% content_for :meta_description, t("meta.#{@presenter.pluralized_kind}.description") %>
<% content_for :meta_keywords, t("meta.#{@presenter.pluralized_kind}.keywords") %>

<div class='presentation_filters organization'>
  <div class='present_by'>
    <p>Вид:</p>
    <ul>
      <li><a href='#'>Постеры</a></li>
      <li><a href='#'>Список</a></li>
    </ul>
  </div>
  <div class='order_by'>
    <p>Сортировать по:</p>
    <ul>
      <li>
        <%= link_to t('affiche.sort.rating'),
          send("#{@presenter.pluralized_kind}_path", @presenter.query.merge('order_by' => 'rating')),
          @presenter.sort_by_rating? ? { class: 'selected' } : {} %>
      </li>
      <li>
        <%= link_to t('affiche.sort.title'),
          send("#{@presenter.pluralized_kind}_path", @presenter.query.merge('order_by' => 'title')),
          @presenter.sort_by_title? ? { class: 'selected' } : {} %>
      </li>
      <li>
        <% if @presenter.geo_filter.used? %>
          <%= link_to t('affiche.sort.nearness'),
            send("#{@presenter.pluralized_kind}_path", @presenter.query.merge('order_by' => 'nearness')),
            @presenter.sort_by_nearness? ? { class: 'selected' } : {} %>
        <% else %>
          <%= link_to t('affiche.sort.nearness'),
            send("#{@presenter.pluralized_kind}_path", @presenter.query.merge('order_by' => 'nearness')),
            class: 'disabled' %>
        <% end %>
      </li>
    </ul>
  </div>
</div>

<div class="organizations_list">
  <% if @presenter.collection.any? %>
    <ul class="items_list">
      <%= render :partial => "organizations/organizations_list" %>
    </ul>
  <% else %>
    <p class="empty_items_list">По заданным параметрам ничего не найдено ;(</p>
  <% end %>
</div>

<%= paginate @presenter.paginated_collection %>
